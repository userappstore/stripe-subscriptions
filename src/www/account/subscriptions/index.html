<!doctype html>
<html navbar="/account/subscriptions/navbar.html">
  <head>
    <title>Manage subscriptions</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="/public/pure-min.css" />
    <link rel="stylesheet" href="/public/content.css" />
		<base href="/" target="_top" />
  </head>
  <body>
    <h1>Manage subscriptions</h1>
    <div id="message-container"></div>
    <div id="balance-informationContainer">
      <h2>Account credit balance</h2>
      <p id="balance"></p>
    </div>
    <div id="payment-informationContainer">
      <h2>Payment information</h2>
      <p id="card"></p>
    </div>
    <div id="subscriptionsContainer">
      <h2>Subscriptions</h2>
      <table id="subscriptions-table" class="pure-table pure-table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Status</th>
            <th>Plan</th>
            <th>Price</th>
            <th>Started</th>
            <th>Next charge</th>          
            <th></th>
          </tr>
        </thead>
      </table>
    </div>
    <div id="invoicesContainer">
      <h2>Recent invoices</h2>
      <table id="invoices-table" class="pure-table pure-table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Invoice number</th>
            <th>Total</th>
            <th>Plan</th>
            <th>Statement description</th>
            <th>Charge date</th>
            <th></th>
          </tr>
        </thead>
      </table>
    </div>
    <div id="cardsContainer">
      <h2>Saved cards</h2>
      <table id="cards-table" class="pure-table pure-table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Card</th>
            <th>Last 4</th>
            <th>Expires</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
      </table>
    </div>
  </body>
  <template id="card-template">
    <span id="${id}">${brand} ending with ${last4}, expiring ${exp_month}/${exp_year}</span>
  </template>
  <template id="card-row-template">
    <tr id="${id}">
      <td><a href="card?card=${id}">${id}</a></td>
      <td>${brand}</td>
      <td>${last4}</td>
      <td>${exp_month} / ${exp_year}</td>
      <td id='default-source-${id}'>Canceled</td>
      <td id='unused-source-${id}'></td>
      <td class="pure-button-group" role="group">
        <a id="delete-card-link-${id}" class="pure-button" href="delete-card?cardid=${id}">Delete</a>
      </td>
    </tr>
  </template>
  <template id="subscription-row-template">
    <tr id="${id}">
      <td><a href="subscription?subscriptionid=${id}">${id}</a></td>
      <td id='active-subscription-${id}'>Active</td>
      <td id='canceling-subscription-${id}'>Active (canceling)</td>
      <td id='trialing-subscription-${id}' title="Trial ending ${trial_end}">Trial (ending in ${trialEndRelative})</td>
      <td id='past_due-subscription-${id}'>Past due</td>
      <td id='canceled-subscription-${id}'>Canceled</td>
      <td id='unpaid-subscription-${id}'>Unpaid</td>
      <td>${plan_name}</td>
      <td id="day-singular-interval-${id}">${priceFormatted} ${currency} / day</td>
      <td id="day-multiple-interval-${id}">${priceFormatted} ${currency} / ${interval_count} days</td>
      <td id="week-singular-interval-${id}">${priceFormatted} ${currency} / week</td>
      <td id="week-multiple-interval-${id}">${priceFormatted} ${currency} / ${interval_count} weeks</td>
      <td id="month-singular-interval-${id}">${priceFormatted} ${currency} / month</td>
      <td id="month-multiple-interval-${id}">${priceFormatted} ${currency} / ${interval_count} months</td>
      <td id="year-singular-interval-${id}">${priceFormatted} ${currency} / year</td>
      <td id="year-multiple-interval-${id}">${priceFormatted} ${currency} / ${interval_count} years</td>
      <td title="${created}">${createdRelative}</td>
      <td title="${nextCharge}">${nextChargeRelative}</td>
      <td class="pure-button-group" role="group">
        <a class="pure-button" href="invoices?subscriptionid=${id}">Invoices</a>
        <a id="change-plan-link-${id}" class="pure-button" href="change-plan?subscriptionid=${id}">Change plan</a>
        <a id="cancel-subscription-link-${id}" class="pure-button" href="cancel-subscription?subscriptionid=${id}">Cancel</a>
      </td>
    </tr>
  </template>
  <template id="invoice-row-template">
    <tr id="${id}">
      <td><a href="invoice?invoiceid=${id}">${id}</a></td>
      <td>${number}</td>
      <td>${totalFormatted}</td>
      <td>${plan_name}</td>
      <td>${statement_descriptor}</td>
      <td title="${date}">${dateRelative}</td>
      <td class="pure-button-group" role="group">
      </td>
    </tr>
  </template>
</html>