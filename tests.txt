
> @userappstore/stripe-subscriptions@1.0.1036 test /home/ubuntu/workspace
> NODE_ENV=testing mocha src/www/api/administrator --recursive --timeout 1800000 --slow 1



  /api/administrator/subscriptions/card-charges-count
    CardChargesCount#GET
      ✓ should count all charges on card (24435ms)

  /api/administrator/subscriptions/card-charges
    CardCharges#GET
      ✓ should limit charges on card to one page (55823ms)

  /api/administrator/subscriptions/card-invoices-count
    CardInvoicesCount#GET
      ✓ should count all invoices on card (22361ms)

  /api/administrator/subscriptions/card-invoices
    CardInvoices#GET
      ✓ should limit invoices on card to one page (23982ms)

  /api/administrator/subscriptions/card-refunds-count
    CardRefundsCount#GET
      ✓ should count all refunds on card (39431ms)

  /api/administrator/subscriptions/card-refunds
    CardRefunds#GET
      ✓ should limit refunds on card to one page (50705ms)

  /api/administrator/subscriptions/card
    Card#GET
      ✓ should reject invalid card (5192ms)
      ✓ should return card data (5230ms)

  /api/administrator/subscriptions/charge
    Charge#GET
      ✓ should reject invalid charge (1788ms)
      ✓ should return charge data (14295ms)

  /api/administrator/subscriptions/charges-count
    ChargesCount#GET
      ✓ should count charges (59531ms)

  /api/administrator/subscriptions/charges
    Charges#GET
      ✓ should limit charges to one page (46631ms)

  /api/administrator/subscriptions/coupon-customers-count
    CouponCustomersCount#GET
      ✓ should count all customers on coupon (11736ms)

  /api/administrator/subscriptions/coupon-customers
    CouponCustomers#GET
      ✓ should limit customers on coupon to one page (17998ms)

  /api/administrator/subscriptions/coupon-subscriptions-count
    CouponSubscriptionsCount#GET
      ✓ should count all subscriptions on coupon (29971ms)

  /api/administrator/subscriptions/coupon-subscriptions
    CouponSubscriptions#GET
      ✓ should limit subscriptions on coupon to one page (39286ms)

  /api/administrator/subscriptions/coupon
    Coupon#GET
      ✓ should reject invalid coupon (1783ms)
      ✓ should return coupon data (2531ms)

  /api/administrator/subscriptions/coupons-count
    CouponsCount#GET
      ✓ should count coupons (4963ms)

  /api/administrator/subscriptions/coupons
    Coupons#GET
      ✓ should limit coupons to one page (4248ms)

  /api/administrator/subscriptions/create-coupon
    CreateCoupon#POST
      ✓ should require alphanumeric id (1536ms)
      ✓ should require percent or amount off (1540ms)
      ✓ should require currency with amount off (1541ms)
      ✓ should require valid percent off (1579ms)
      ✓ should require valid duration (1540ms)
      ✓ should require valid repeating duration (1535ms)
      ✓ should require valid expire_meridien (1534ms)
      ✓ should require valid expire (1524ms)
      ✓ should create coupon (2337ms)
      ✓ should create published coupon (2302ms)

  /api/administrator/subscriptions/create-plan
    CreatePlan#POST
      ✓ should require alphanumeric id (2255ms)
      ✓ should require product (2256ms)
      ✓ should require valid product (1762ms)
      ✓ should require amount (2479ms)
      ✓ should require currency (2324ms)
      ✓ should require valid interval (2599ms)
      ✓ should require valid interval count (2624ms)
      ✓ should require valid trial period (2818ms)
      ✓ should create plan (3767ms)
      ✓ should create published plan (3666ms)

  /api/administrator/subscriptions/create-product
    CreateProduct#POST
      ✓ should require name (1528ms)
      ✓ should require statement_descriptor (1535ms)
      ✓ should create product (3078ms)
      ✓ should create published product (3240ms)

  /api/administrator/subscriptions/create-refund
    CreateRefund#POST
      ✓ should reject invalid charge (1935ms)
      ✓ should require amount (15306ms)
      ✓ should reject negative amount (14670ms)
      ✓ should reject amount higher than charge (14690ms)
      ✓ should create authorized refund (16154ms)

  /api/administrator/subscriptions/customer-cards-count
    CustomerCardsCount#GET
      ✓ should count all cards on customer (11742ms)

  /api/administrator/subscriptions/customer-cards
    CustomerCards#GET
      ✓ should limit cards on customer to one page (9181ms)

  /api/administrator/subscriptions/customer-charges-count
    CustomerChargesCount#GET
      ✓ should count all charges on customer (23514ms)

  /api/administrator/subscriptions/customer-charges
    CustomerCharges#GET
      ✓ should limit charges on customer to one page (31528ms)

  /api/administrator/subscriptions/customer-invoices-count
    CustomerInvoicesCount#GET
      ✓ should count all invoices on customer (21334ms)

  /api/administrator/subscriptions/customer-invoices
    CustomerInvoices#GET
      ✓ should limit invoices on customer to one page (31707ms)

  /api/administrator/subscriptions/customer-refunds-count
    CustomerRefundsCount#GET
      ✓ should count all refunds on customer (35345ms)

  /api/administrator/subscriptions/customer-refunds
    CustomerRefunds#GET
      ✓ should limit refunds on customer to one page (49761ms)

  /api/administrator/subscriptions/customer-subscriptions-count
    CustomerSubscriptionsCount#GET
      ✓ should count all subscriptions on customer (23266ms)

  /api/administrator/subscriptions/customer-subscriptions
    CustomerSubscriptions#GET
      ✓ should limit subscriptions on customer to one page (34175ms)

  /api/administrator/subscriptions/customer
    Customer#GET
      ✓ should reject invalid customer (1772ms)
      ✓ should return customer data (5248ms)

  /api/administrator/subscriptions/customers-count
    CustomersCount#GET
      ✓ should count customers (5215ms)

  /api/administrator/subscriptions/customers
    Customers#GET
      ✓ should limit customers to one page (7681ms)

  /api/administrator/subscriptions/delete-coupon
    DeleteCoupon#DELETE
      ✓ should reject invalid couponid (1817ms)
      ✓ should delete coupon (3274ms)

  /api/administrator/subscriptions/delete-plan
    DeletePlan#DELETE
      ✓ should reject invalid planid (1757ms)
      ✓ should delete plan (4494ms)

  /api/administrator/subscriptions/delete-product
    DeleteProduct#DELETE
      ✓ should reject invalid productid (1758ms)
      ✓ should delete product (3303ms)

  /api/administrator/subscriptions/delete-subscription
    DeleteSubscription#DELETE
      ✓ should reject invalid subscriptionid (1861ms)
      ✓ should require active subscription (16726ms)
      ✓ should delete subscription at period end (13831ms)
      ✓ should delete subscription immediately (15311ms)

  /api/administrator/subscriptions/invoice
    Invoice#GET
      ✓ should reject invalid invoice (1771ms)
      ✓ should return invoice data (13497ms)

  /api/administrator/subscriptions/invoices-count
    InvoicesCount#GET
      ✓ should count invoices (23293ms)

  /api/administrator/subscriptions/invoices
    Invoices#GET
      ✓ should limit invoices to one page (44287ms)

  /api/administrator/subscriptions/payout
    Payout#GET
      ✓ should reject invalid payoutid (1768ms)
      ✓ should return payout data (8423ms)

  /api/administrator/subscriptions/payouts-count
    PayoutsCount#GET
      ✓ should count payouts (33862ms)

  /api/administrator/subscriptions/payouts
    Payouts#GET
      ✓ should return limit payouts to one page (16143ms)

  /api/administrator/subscriptions/plan-charges-count
    PlanChargesCount#GET
      ✓ should count all charges on plan (24113ms)

  /api/administrator/subscriptions/plan-charges
    PlanCharges#GET
      ✓ should limit charges on plan to one page (60903ms)

  /api/administrator/subscriptions/plan-customers-count
    PlanCustomersCount#GET
      ✓ should count all customers on plan (44528ms)

  /api/administrator/subscriptions/plan-customers
    PlanCustomers#GET
      ✓ should limit customers on plan to one page (37195ms)

  /api/administrator/subscriptions/plan-invoices-count
    PlanInvoicesCount#GET
      ✓ should count all invoices on plan (28180ms)

  /api/administrator/subscriptions/plan-invoices
    PlanInvoices#GET
      ✓ should limit invoices on plan to one page (32920ms)

  /api/administrator/subscriptions/plan-refunds-count
    PlanRefundsCount#GET
      ✓ should count all refunds on plan (45851ms)

  /api/administrator/subscriptions/plan-refunds
    PlanRefunds#GET
      ✓ should limit refunds on plan to one page (49640ms)

  /api/administrator/subscriptions/plan-subscriptions-count
    PlanSubscriptionsCount#GET
      ✓ should count all subscriptions on plan (19908ms)

  /api/administrator/subscriptions/plan-subscriptions
    PlanSubscriptions#GET
      ✓ should limit subscriptions on plan to one page (32085ms)

  /api/administrator/subscriptions/plan
    Plan#GET
      ✓ should return plan data (3751ms)

  /api/administrator/subscriptions/plans-count
    PlansCount#GET
      ✓ should count plans (6096ms)

  /api/administrator/subscriptions/plans
    Plans#GET
      ✓ should limit plans to one page (8996ms)

  /api/administrator/subscriptions/product-charges-count
    ProductChargesCount#GET
      ✓ should count all charges on product (40624ms)

  /api/administrator/subscriptions/product-charges
    ProductCharges#GET
      ✓ should limit charges on product to one page (24238ms)

  /api/administrator/subscriptions/product-customers-count
    ProductCustomersCount#GET
      ✓ should count all customers on product (27497ms)

  /api/administrator/subscriptions/product-customers
    ProductCustomers#GET
      ✓ should limit customers on product to one page (39310ms)

  /api/administrator/subscriptions/product-invoices-count
    ProductInvoicesCount#GET
      ✓ should count all invoices on product (27659ms)

  /api/administrator/subscriptions/product-invoices
    ProductInvoices#GET
      ✓ should limit invoices on product to one page (37532ms)

  /api/administrator/subscriptions/product-refunds-count
    ProductRefundsCount#GET
      ✓ should count all refunds on product (45997ms)

  /api/administrator/subscriptions/product-refunds
    ProductRefunds#GET
      ✓ should limit refunds on product to one page (50698ms)

  /api/administrator/subscriptions/product-subscriptions-count
    ProductSubscriptionsCount#GET
      ✓ should count all subscriptions on product (23105ms)

  /api/administrator/subscriptions/product-subscriptions
    ProductSubscriptions#GET
      ✓ should limit subscriptions on product to one page (56794ms)

  /api/administrator/subscriptions/product
    Product#GET
      ✓ should return product data (2577ms)

  /api/administrator/subscriptions/products-count
    ProductsCount#GET
      ✓ should count products (3742ms)

  /api/administrator/subscriptions/products
    Products#GET
      ✓ should limit products to one page (5324ms)

  /api/administrator/subscriptions/published-coupons-count
    PublishedCouponsCount#GET
      ✓ should count all published coupons (5412ms)

  /api/administrator/subscriptions/published-coupons
    PublishedCoupons#GET
      ✓ should limit published coupons to one page (4209ms)

  /api/administrator/subscriptions/published-plans-count
    PublishedPlansCount#GET
      ✓ should count all published plans (8341ms)

  /api/administrator/subscriptions/published-plans
    PublishedPlans#GET
      ✓ should limit published plans to one page (6722ms)

  /api/administrator/subscriptions/published-products-count
    PublishedProductsCount#GET
      ✓ should count all published products (6046ms)

  /api/administrator/subscriptions/published-products
    PublishedProducts#GET
      ✓ should limit published products to one page (4503ms)

  /api/administrator/subscriptions/refund
    Refund#GET
      ✓ should reject invalid refund (1903ms)
      ✓ should return refund data (20320ms)

  /api/administrator/subscriptions/refunds-count
    RefundsCount#GET
      ✓ should count all refunds (42329ms)

  /api/administrator/subscriptions/refunds
    Refunds#GET
      ✓ should limit refunds to one page (60930ms)

  /api/administrator/subscriptions/reset-customer-coupon
    ResetCustomerCoupon#PATCH
      ✓ should reject invalid customerid (1793ms)
      ✓ should reject undiscounted customer (3652ms)
      ✓ should remove customer coupon (6510ms)

  /api/administrator/subscriptions/reset-subscription-coupon
    ResetSubscriptionCoupon#PATCH
      ✓ should reject invalid subscriptionid (1785ms)
      ✓ should reject undiscounted subscription (13899ms)
      ✓ should remove subscription coupon (15724ms)

  /api/administrator/subscriptions/set-charge-flagged
    SetChargeRefunded#PATCH
      ✓ should reject invalid charge (1851ms)
      ✓ should reject flagged charge (23522ms)
